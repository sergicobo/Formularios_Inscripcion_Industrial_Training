<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ficha Inscripción - Industrial Training</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: #f3f4f6; /* gris claro texturizado (fondo) */
    --card-bg: #ffffff;
    --text: #000000;
    --muted: #6b7280;
    --accent: #f3ae00; /* --color-naranja: Sustituir por tu naranja corporativo */
	--industrial: #f3ae00;
    --black: #000000;
    --white: #ffffff;
    --shadow: 0 6px 18px rgba(0,0,0,0.08);
  }
  /* Si deseas cambiar el naranja corporativo, reemplaza --accent arriba por tu color exacto */
  body{
    font-family: 'Poppins', 'Open Sans', Arial, sans-serif;
    background: var(--black);
    margin: 0; padding: 24px; color: var(--text);
  }
  .wrap{
    max-width: 820px; margin: 24px auto;
  }
  .card{
	background: var(--industrial);
    border-radius: 12px; padding: 22px;
    box-shadow: var(--shadow);
    border: 1px solid rgba(0,0,0,0.04);
  }
  .header {
	width: 100%;
	text-align: center;
	background: black;
	border-bottom: 4px solid var(--accent);
	box-shadow: 0 2px 6px rgba(0,0,0,0.1);
	padding: 0; /* elimina espacio extra */
	border-radius: 12px; /* 🔹 esquinas redondeadas */
	overflow: hidden;    /* 🔹 evita que la imagen sobresalga */
  }

  .header .logo {
	width: 100%;          /* ocupa todo el ancho disponible */
	max-height: 180px;    /* 🔧 ajusta la altura máxima para no deformar */
	object-fit: contain;  /* mantiene proporciones del logo */
	display: block;
	margin: 0 auto;
  }

  .header h1 {
	margin: 0;
	font-size: 1.8rem;
	color: var(--accent);        /* naranja corporativo */
  }

  .header .lead {
	font-size: 1rem;
	color: #555;
	margin-top: 0.5rem;
  }
	
  <!--.header{
    display:flex; gap:16px; align-items:center; margin-bottom:12px;
  }-->
  .logo{ max-height:72px; object-fit:contain; }
  h1{ font-size:20px; margin:0; color:var(--black); }
  p.lead{ margin:6px 0 12px 0; color:var(--muted); }
  
  #Inscripcion {
  text-align: center;
  margin-top: 12px;
  }

  #Inscripcion h1 {
	font-size: 1.8rem;
	color: var(--black); /* naranja corporativo */
  }

  #Inscripcion .lead {
	font-size: 1rem;
	color: #555;
	margin-top: 0.5rem;
  }
  
  .grid{
    display:grid; grid-template-columns: 1fr 1fr; gap:12px;
  }
  label{ display:block; font-weight:600; margin-bottom:6px; color:var(--text); font-size:14px; }
  input[type="text"], input[type="email"], input[type="tel"], input[type="date"], select {
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid #d1d5db; background: #fff;
    box-sizing:border-box; font-size:14px;
  }
  .full{ grid-column: 1 / -1; }
  .muted-small{ font-size:12px; color:var(--muted); margin-top:6px; }

  .radio-group, .checkbox-group{ display:flex; gap:12px; flex-wrap:wrap; }
  .radio-group label, .checkbox-group label{ font-weight:400; color:var(--text); }

  .firma-box{ text-align:center; margin-top:12px; }
  canvas{ border:1px solid #d1d5db; border-radius:8px; background:#fff; touch-action:none; }
  .btn{
    background:green; color:var(--white); border:none; padding:12px 18px; border-radius:10px;
    font-weight:700; cursor:pointer; font-size:15px;
  }
  .btn.secondary{ background:#111827; color:var(--white); }

  footer.legal{ margin-top:18px; font-size:12px; color:var(--muted); }

  @media (max-width:720px){
    .grid{ grid-template-columns: 1fr; }
    .header{ flex-direction:column; align-items:flex-start; }
    .logo{ max-height:64px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="header">
      <!-- Replace TU_LOGO.png with a file in the same folder or served; if serving from Apps Script logo is injected in PDF only -->
      <img src="LOGO_INDUSTRIAL.png" alt="Industrial Training" class="logo">
    </div>
	<div id="Inscripcion">
        <h1>Ficha de Inscripción - Industrial Training</h1>
        <p class="lead">Rellene todos los campos del formulario.</p>
    </div>

    <form id="formulario">
      <div class="grid">
        <div>
          <label>Nombre</label>
          <input name="nombre" type="text" required>
        </div>
        <div>
          <label>Apellidos</label>
          <input name="apellidos" type="text" required>
        </div>

        <div class="full">
          <label>DNI</label>
          <input name="dni" type="text" required>
        </div>

        <div>
          <label>Fecha de nacimiento</label>
          <input name="fecha_nacimiento" type="date" required>
        </div>
        <div>
          <label>Teléfono</label>
          <input name="telefono" type="tel" required>
        </div>

        <div class="full">
          <label>Dirección</label>
          <input name="direccion" type="text" required>
        </div>
        <div class="full">
          <label>Calle 2 (opcional)</label>
          <input name="direccion2" type="text">
        </div>

        <div>
          <label>Ciudad</label>
          <input name="ciudad" type="text" required>
        </div>
        <div>
          <label>Estado / Provincia</label>
          <input name="estado" type="text" required>
        </div>

        <div>
          <label>Código Postal</label>
          <input name="cp" type="text" required>
        </div>
        <div>
          <label>Email</label>
          <input name="email" type="email" required>
        </div>

        <div class="full">
          <label>Cuota</label>
          <select name="cuota" required>
            <option value="">Selecciona...</option>
            <option>Bronce (55€/mes x 2 wods a la semana)</option>
            <option>Plata (65€/mes x 3 wods a la semana)</option>
            <option>Oro (75€/mes x 3 wods a la semana)</option>
            <option>Diamante (85€/mes x clases ilimitadas)</option>
            <option>Boxeo (65€/mes x clases ilimitadas)</option>
            <option>Fusión (75€/mes x 2 wods y boxeo ilimitado)</option>
            <option>KIDS (45€/mes x 1 Actividad)</option>
            <option>KIDS DUO (65€/mes x 2 actividades)</option>
          </select>
        </div>

        <div class="full">
          <label>Autorización de derechos de imagen</label>
          <div class="radio-group">
            <label><input type="radio" name="imagen" value="Si autorizo" required> Si autorizo a Industrial Training a captar y utilizar mi imagen (fotografías o vídeos) tomadas durante actividades o eventos del gimnasio, con fines informativos y/o promocionales en medios físicos o digitales del centro.</label>
		  </div>
		  <div class="radio-group">
            <label><input type="radio" name="imagen" value="No autorizo" required> No autorizo mis derechos de imagen</label>
          </div>
        </div>

        <div class="full">
          <label>Opciones de pago</label>
          <div class="radio-group">
            <label><input type="radio" name="pago" value="Domiciliación día 28" required> Domiciliación día 28</label>
		  </div>
		  <div class="radio-group">
            <label><input type="radio" name="pago" value="Domiciliación día 5" required> Domiciliación día 5</label>
		  </div>
		  <div class="radio-group">
            <label><input type="radio" name="pago" value="Efectivo" required> Efectivo (Máximo hasta el día 5 de cada mes)</label>
          </div>
		  <p class="muted-small">
			En caso de devolución del recibo, se cobrarán 8 € por costes bancarios. Si no se realiza el pago antes del día 5, el recibo se girará automáticamente. Si la deuda no se paga antes del día 8, la membresía se dará de baja y deberá reiniciarse la inscripción con los pagos correspondientes. La solicitud de baja deberá realizarse antes del día 25 de cada mes.
          </p>
        </div>

        <div class="full">
          <label>Número de cuenta IBAN</label>
          <input name="iban" type="text">
		  <p class="muted-small">
			Autorizo a Industrial Training a gestionar los pagos de mis cuotas mediante domiciliación bancaria conforme a la normativa SEPA (Reglamento UE 260/2012). Declaro que los datos bancarios proporcionados son veraces y autorizo su uso exclusivo para este fin.
          </p>
        </div>

        <div class="full">
          <label>Fecha actual</label>
          <input name="fecha_actual" id="fecha_actual" readonly>
        </div>

        <div class="full">
          <label>Firma del cliente</label>
          <div class="firma-box">
            <canvas id="firma" width="560" height="180"></canvas><br>
            <button type="button" id="borrar" class="btn secondary" style="margin-top:8px;">Borrar firma</button>
          </div>
		  <div class="radio-group">
            <label><input type="radio" name="conditions" value="Condiciones" required> Declaro haber leído y aceptado las condiciones anteriores, así como las normas internas de Industrial Training.</label>
		  </div>
        </div>

      </div>

      <div style="margin-top:16px; text-align:right;">
        <button type="submit" class="btn">Enviar inscripción</button>
      </div>

      <footer class="legal">
	      <p class="muted-small">
            <strong>Protección de datos:</strong> De acuerdo con el Reglamento (UE) 2016/679 (RGPD) y la Ley Orgánica 3/2018 (LOPDGDD), se informa que el responsable del tratamiento de la información es Industrial Training, con la finalidad de gestionar inscripciones, cobros y actividades del gimnasio.
          </p>
      </footer>
    </form>
  </div>
</div>

<script>
  // Fecha actual
  document.getElementById('fecha_actual').value = new Date().toLocaleDateString('es-ES');

  // Firma: simple dibujo en canvas (desktop + touch)
  (function(){
    const canvas = document.getElementById('firma');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let lastX=0, lastY=0;

    function start(e){
      drawing = true;
      [lastX, lastY] = getXY(e);
      ctx.beginPath();
    }
    function end(e){
      drawing = false;
      ctx.beginPath();
    }
    function draw(e){
      if(!drawing) return;
      const [x,y] = getXY(e);
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#111';
      ctx.moveTo(lastX,lastY);
      ctx.lineTo(x,y);
      ctx.stroke();
      [lastX,lastY] = [x,y];
    }
    function getXY(e){
      const rect = canvas.getBoundingClientRect();
      if(e.touches && e.touches.length){
        return [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
      } else {
        return [e.clientX - rect.left, e.clientY - rect.top];
      }
    }

    canvas.addEventListener('mousedown', start);
    canvas.addEventListener('touchstart', start);
    window.addEventListener('mouseup', end);
    canvas.addEventListener('touchend', end);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchmove', function(e){ e.preventDefault(); draw(e); }, {passive:false});

    document.getElementById('borrar').addEventListener('click', function(){ ctx.clearRect(0,0,canvas.width,canvas.height); });

    // Submit
    const form = document.getElementById('formulario');
    form.addEventListener('submit', function(e){
      e.preventDefault();
      const dataUrl = canvas.toDataURL('image/png');
      const data = new FormData(form);
      data.append('firma', dataUrl);

      // scriptURL - cuando desplegues como Web App, sustituye por la URL de tu App si no usas doGet
      const scriptURL = '<?= ScriptApp.getService().getUrl() ?>';

      fetch(scriptURL, { method: 'POST', body: data })
        .then(r => r.text())
        .then(txt => {
          if(txt && txt.startsWith('OK')) {
            alert('¡Formulario enviado correctamente!');
            form.reset();
            ctx.clearRect(0,0,canvas.width,canvas.height);
          } else {
            alert('Respuesta del servidor: ' + txt);
          }
        })
        .catch(err => {
          alert('Error al enviar: ' + err);
        });
    });
  })();
</script>
</body>
</html>
